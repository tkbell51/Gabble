<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gabble-Home</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.99.0/css/materialize.min.css">

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <ul id="slide-out" class="side-nav fixed orange">
    <li>
      <a class="title" href="/gabble/">Gabble</a>
    </li>
    <li>
      <p>{{welcomeName}}<br>is logged in</p>

    </li>
    <li>
      <form class='signout' action='/gabble/signout' method='post'>
        <button class="btn waves-effect waves-light orange" type="submit" name="action">Sign Out
          <i class="material-icons right">close</i>
        </button>
      </form>
    </li>
  </ul>

  <main>
    <h1>Welcome {{signedInUser}}</h1>

    <form class="container" action="/gabble/" method="post">
      <input type="text" name="newPost" value="" placeholder="What you want to Gab about?">
      <button class="btn waves-effect waves-light orange" type="submit" name="action">Create Gab
        <i class="material-icons left">send</i>
      </button>
    </form>

    {{#model}}



    <a href="/gabble/{{id}}">
      <div class="gab container grey darken-4">
        <div class="row">
          <div class="col s6">
            <p>@{{users.username}}</p>
          </div>
          <div class="col s6">
            <p>{{createdAt}}</p>
          </div>
        </div>

        <p class="orange-text">{{gab}}</p>

        <div class="row">
          <div class="col s2">
            <form class='like' action="/gabble/like/{{id}}" method="post">
              <button class="btn-floating btn-large waves-effect waves-light orange" name="like"><i class="material-icons">thumb_up</i></button>
            </form>
          </div>
          <div class="col s3">
            {{#UserLikes.length}}
            <p>{{.}} Likes</p>
            {{/UserLikes.length}}
            {{^UserLikes.length}}
            <p>No Likes<p>
            {{/UserLikes.length}}
          </div>
          <div class="delete col s7">
            {{#loggedInUser}}
            <form class="delete" action="/gabble/delete/{{id}}" method="post">
              <button class="btn-floating btn-large waves-effect waves-light orange" name="delete"><i class="material-icons">delete</i></button>
            </form>
          {{/loggedInUser}}
          {{^loggedInUser}}
          {{/loggedInUser}}

          </div>




        </div>
        <p>{{message}}<p>
        </div>
    </a>
      {{/model}}

    </main>
  </body>
  </html>
